<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="manifest" href="/assets/manifest.json"/>
    <title>CoinsInvestments</title>
    <base href="/">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="icon" type="image/x-icon" href="/assets/brand/favicon.ico"/>

    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#159ADF">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Compit">
    <meta name="apple-mobile-web-app-title" content="Compit">
    <meta name="theme-color" content="#4CAF50F">

    <meta name="msapplication-navbutton-color" content="#4CAF50F">
    <meta name="msapplication-starturl" content="/">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>


</head>
<body>
<app-root>Loading...</app-root>
<script>
    if ('serviceWorker' in navigator) {
        console.log('ddddd');
        const versionUpdatedEvent = new CustomEvent("versionUpdated", null);

        /** this = registration **/
        const UpdateFound = function () {
            const installingWorker = this.installing;
            installingWorker.onstatechange = function () {
                switch (installingWorker.state) {
                    case 'installed':
                        if (navigator.serviceWorker.controller) {

                            /** NotificationService subscribed to this event **/
                            document.dispatchEvent(versionUpdatedEvent);
                            console.log('[SERVICE-WORKER] New or updated content is available.');
                        } else {
                            /** At this point, everything has been pre-cached.
                             It's the perfect time to display a "Content is cached for offline use." message.**/
                            console.log('[SERVICE-WORKER] Content is now available offline!');
                        }
                        break;
                    case 'redundant':
                        console.warn('[SERVICE-WORKER] The installing service worker became REDUNDANT.');
                        break;
                }
            };
        };

//        window.addEventListener('SWRegistrationEvent', function (event) {
        console.log('[SWRegistrationEvent]', event);
        navigator.serviceWorker.register('/service-worker.js')
            .then(function (registration) {
                registration.onupdatefound = UpdateFound.bind(registration);
                setInterval(registration.update.bind(registration), 10000);
                console.log('SERVICE-WORKER ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(function (err) {
                // registration failed :(
                console.log('SERVICE-WORKER ServiceWorker registration failed: ', err);
            });
//        });
    }
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-109749943-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-109749943-1');
</script>
</body>
</html>
